{% extends "layout.html" %}
{% block body %}

<h2>{{ doc[1] }}</h2>

<iframe src="/static/docs/sample.pdf" width="100%" height="500px"></iframe>

<h3>Comments</h3>

<div id="comment-list">
    {% for c in comments %}
        <p><b>{{ c[2] }}</b>: {{ c[0] }} <br>
        <small>{{ c[1] }}</small></p>
        <hr>
    {% endfor %}
</div>

<textarea id="comment-text" rows="4" style="width:100%"></textarea>
<br>
<button onclick="postComment()">Add Comment</button>

<script>
function postComment() {
    fetch("/add_comment", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            document_id: {{ doc[0] }},
            comment: document.getElementById("comment-text").value
        })
    }).then(res => res.json())
    .then(data => {
        if (data.status === "success") {
            location.reload();
        }
    });
}
</script>

{% endblock %}
